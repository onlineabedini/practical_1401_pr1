datasource db {
    provider = "postgresql"
    url = env("DATABASE_URL")
}

generator client {
    provider = "prisma-client-js"
}

enum GENDERS {
    MAN
    WOMAN
}

//======================================================================================================
model User{
    //common fields-----------------
    id                 Int               @default(autoincrement()) @id
    appAction          Boolean           @default(true)
    //required fields----------------
    userName           String
    firstName          String?
    lastName           String?
    address            String?       
    email              String?            @unique
    phone              String?            @unique
    password           String
    gender             GENDERS            @default(MAN)
    article            Article[]          @relation("USER_ARTICLE")
    reports            Reports[]          @relation("USER_REPORTS")
    payment            Payment[]          @relation("USER_PAYMENT")
    cart               Cart[]             @relation("USER_CART")
}

//====================================================================================================
model Product{
    //common fields-----------------
    id                Int                @default(autoincrement()) @id
    //required fields----------------
    title             String             @unique
    subTitle          String?
    price             Int
    discount          Int?               @default(0)
    description       String             
    category          String?             
    image             String? 
    cart              Cart[]             @relation("PRODUCT_CART")         
}
//====================================================================================================
model Article{
    //common fields-----------------
    id                Int                @default(autoincrement()) @id
    //required fields----------------
    subject          String             
    content          String    
    userId           Int 
    users            User                 @relation("USER_ARTICLE" , fields: [userId] , references: [id])                   
}
//====================================================================================================
model Reports{
    //common fields-----------------
    id                Int                @default(autoincrement()) @id
    //required fields----------------
    title             String             
    description       String    
    answer            String?
    userId            Int
    users             User               @relation("USER_REPORTS" , fields: [userId] , references: [id])
}
//====================================================================================================
model Payment{
    //common fields-----------------
    id                Int                @default(autoincrement()) @id
    //required fields----------------
    price             Int
    discount          String
    date              DateTime           @default(now())  @db.Timestamptz(3)           
    userId            Int
    cartId            Int 
    users             User               @relation("USER_PAYMENT" , fields: [userId] , references: [id])
    carts             Cart               @relation("CART_PAYMENT" , fields: [cartId] , references: [id])          
}
//====================================================================================================
model Cart{
    //common fields-----------------
    id                Int                @default(autoincrement()) @id
    //required fields----------------
    date              DateTime           @default(now())  @db.Timestamptz(3)           
    userId            Int
    productId         Int
    users             User              @relation("USER_CART" , fields: [userId] , references: [id])
    products          Product           @relation("PRODUCT_CART" , fields: [productId] , references: [id])
    payment           Payment[]         @relation("CART_PAYMENT")     
}
//===================================================================================================== Noticess
model Noticess {
    id              Int                 @default(autoincrement()) @id
    title           String
    createdAt       DateTime            @default(now())  @db.Timestamptz(3)
}
